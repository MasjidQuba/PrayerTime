<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIC Digital Display</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Inter:wght@400;700;900&display=swap');

        :root {
            --bg-color: #f4f7f9;
            --primary-blue: #1e4571;
            --gold: #d4af37;
            --iqama-green: #2e7d32;
            --text-light: #ffffff;
            --highlight-row: #fff9c4;
        }

        body {
            background-color: var(--bg-color);
            margin: 0;
            padding: 15px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            box-sizing: border-box;
        }

        .header-box {
            background: var(--primary-blue);
            border-radius: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 40px;
            color: white;
            height: 210px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border: 4px solid var(--gold);
        }

        .header-img { height: 160px; width: auto; object-fit: contain; }

        .center-content { text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; flex-grow: 1; }
        .masjid-label { font-size: 1.8rem; font-weight: 900; text-transform: uppercase; color: var(--text-light); margin-bottom: 2px; }

        #clock { font-size: 5rem; font-weight: 900; line-height: 1; letter-spacing: -2px; }

        .weather-row { display: flex; gap: 15px; align-items: center; margin: 5px 0; font-weight: 800; }
        #temp { font-size: 1.8rem; color: var(--gold); }
        #condition { font-size: 1.1rem; text-transform: uppercase; opacity: 0.9; color: var(--text-light); }

        #hijri { font-size: 1.6rem; color: var(--gold); font-weight: 700; }

        .prayer-table { width: 100%; margin-top: 10px; border-collapse: separate; border-spacing: 0 8px; table-layout: fixed; }
        .table-header th { font-size: 1.8rem; font-weight: 900; color: var(--primary-blue); text-transform: uppercase; }
        .prayer-row td {
            background: white;
            padding: 16px 10px;
            text-align: center;
            font-size: 2.6rem;
            font-weight: 800;
            border-bottom: 2px solid var(--gold);
        }
        .prayer-row.active td {
            background: var(--highlight-row) !important;
            border-top: 6px solid var(--gold);
            border-bottom: 6px solid var(--gold);
            transform: scale(1.01);
            color: #000;
        }
        .prayer-row:last-child td { border-bottom: none; }
        .col-en { text-align: left !important; padding-left: 30px !important; border-radius: 20px 0 0 20px; color: var(--primary-blue); }
        .col-ar { text-align: right !important; padding-right: 30px !important; font-family: 'Amiri', serif; font-size: 3.2rem !important; border-radius: 0 20px 20px 0; color: var(--primary-blue); }
        .col-iqama { color: var(--iqama-green); font-weight: 900; background: #e8f5e9 !important; }

        .iqama-text { font-size: 1.9rem !important; }

        .hadith-container {
            flex-grow: 1;
            background: var(--primary-blue);
            border-radius: 25px;
            margin-top: 10px;
            padding: 20px 40px;
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: center;
            border: 3px solid var(--gold);
        }
        .ar-text { font-family: 'Amiri', serif; font-size: 2.8rem; direction: rtl; line-height: 1.3; margin-bottom: 8px; }
        .en-text { font-size: 1.7rem; font-style: italic; color: #cfd8dc; line-height: 1.3; }

        .countdown-bar {
            background: #2e7d32;
            color: white;
            padding: 10px;
            border-radius: 15px;
            text-align: center;
            margin-top: 10px;
            font-size: 1.8rem;
            font-weight: 900;
            border: 2px solid var(--gold);
        }

        .donation-bar { background: var(--gold); color: #000; padding: 12px; border-radius: 20px; text-align: center; margin-top: 10px; border: 4px solid var(--primary-blue); }
        .donation-msg { font-size: 1.5rem; font-weight: 900; }

        #donation-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            background: radial-gradient(circle, var(--primary-blue) 0%, #0a192f 100%);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: white;
            border: 15px solid var(--gold);
            box-sizing: border-box;
        }

        .qr-large {
            width: 400px;
            height: 400px;
            background: white;
            padding: 20px;
            border-radius: 40px;
            box-shadow: 0 0 50px rgba(212, 175, 55, 0.5);
            margin: 40px 0;
        }

        .slide-msg { font-size: 4rem; font-weight: 900; color: var(--gold); }
        .slide-sub { font-size: 2.5rem; margin-bottom: 10px; opacity: 0.9; }
    </style>
</head>
<body>

    <div class="header-box">
        <img src="Muhammad.png" class="header-img" alt="Muhammad SAW">
        <div class="center-content">
            <div class="masjid-label">Lakeridge Islamic Center</div>
            <div id="clock">00:00:00</div>
            <div class="weather-row">
                <span id="temp">--¬∞C</span>
                <span id="condition">Loading...</span>
            </div>
            <div id="hijri">-- --- ----</div>
        </div>
        <img src="Allah.png" class="header-img" alt="Allah SWT">
    </div>

    <table class="prayer-table">
        <thead>
            <tr class="table-header">
                <th style="text-align: left; padding-left: 30px;">Salah</th>
                <th>Starting</th>
                <th style="color: var(--iqama-green);">Iqama</th>
                <th style="text-align: right; padding-right: 30px;">ÿßŸÑÿµŸÑÿßÿ©</th>
            </tr>
        </thead>
        <tbody id="prayer-body"></tbody>
    </table>

    <div class="hadith-container">
        <div class="ar-text" id="ar-hadith">...</div>
        <div class="en-text" id="en-hadith">...</div>
    </div>

    <div class="countdown-bar" id="ramadan-countdown">
        Calculating Ramadan Countdown...
    </div>

    <div class="donation-bar">
        <div class="donation-msg">
            PLEASE DONATE GENEROUSLY ‚Ä¢ <b>C$ 1.4 MILLION</b> NEEDED TO PAY QARDE HASANA<br>
            üåê www.ajaxmasjid.ca ‚Ä¢ üìß info@ajaxmasjid.ca
        </div>
    </div>

    <div id="donation-overlay">
        <div class="slide-sub">Lakeridge Islamic Center</div>
        <div class="slide-msg">QARDE HASANA REPAYMENT</div>

        <div style="width: 80%; margin: 30px 0;">
            <div style="display: flex; justify-content: space-between; font-size: 2rem; font-weight: 800; margin-bottom: 10px;">
                <span id="raised-text">Raised: $0</span>
                <span>Goal: $1.4M</span>
            </div>
            <div style="width: 100%; height: 40px; background: rgba(255,255,255,0.2); border-radius: 20px; border: 3px solid var(--gold); overflow: hidden;">
                <div id="progress-fill" style="width: 0%; height: 100%; background: var(--gold); transition: width 2s ease-in-out;"></div>
            </div>
            <div id="percent-text" style="text-align: right; font-size: 1.5rem; margin-top: 5px; font-weight: 700;">0% Completed</div>
        </div>

        <img src="Donate-QR.png" class="qr-large" alt="Scan to Donate">

        <div class="slide-msg" style="font-size: 2.5rem;">SCAN TO DONATE NOW</div>

        <div style="margin-top: 40px; font-size: 1.8rem; font-style: italic; color: var(--gold);">
            "The believer's shade on the Day of Resurrection will be his charity."
        </div>
    </div>

    <script>
        // --- FUNDRAISING GOALS (Update these regularly) ---
        const GOAL_AMOUNT = 1400000;
        const CURRENT_RAISED = 1000000;

        const iqamaTimes = { Fajr: "6:15", Dhuhr: "1:30", Asr: "4:00", Maghrib: "3 mins after", Isha: "8:00" };
        const salahList = [{id:'Fajr',ar:'ÿßŸÑŸÅÿ¨ÿ±'},{id:'Dhuhr',ar:'ÿßŸÑÿ∏Ÿáÿ±'},{id:'Asr',ar:'ÿßŸÑÿπÿµÿ±'},{id:'Maghrib',ar:'ÿßŸÑŸÖÿ∫ÿ±ÿ®'},{id:'Isha',ar:'ÿßŸÑÿπÿ¥ÿßÿ°'}];

        const localHadiths = [
									        // RAMADAN & FASTING
									        { ar: "ŸÖŸéŸÜŸí ÿµŸéÿßŸÖŸé ÿ±ŸéŸÖŸéÿ∂ŸéÿßŸÜŸé ÿ•ŸêŸäŸÖŸéÿßŸÜŸãÿß ŸàŸéÿßÿ≠Ÿíÿ™Ÿêÿ≥Ÿéÿßÿ®Ÿãÿß ÿ∫ŸèŸÅŸêÿ±Ÿé ŸÑŸéŸáŸè ŸÖŸéÿß ÿ™ŸéŸÇŸéÿØŸëŸéŸÖŸé ŸÖŸêŸÜŸí ÿ∞ŸéŸÜŸíÿ®ŸêŸáŸê", en: "Whoever fasts Ramadan out of faith and seeking reward, his previous sins will be forgiven.", ref: "Bukhari" },
									        { ar: "ŸÑŸêŸÑÿµŸëŸéÿßÿ¶ŸêŸÖŸê ŸÅŸéÿ±Ÿíÿ≠Ÿéÿ™ŸéÿßŸÜŸê: ŸÅŸéÿ±Ÿíÿ≠Ÿéÿ©Ÿå ÿπŸêŸÜŸíÿØŸé ŸÅŸêÿ∑Ÿíÿ±ŸêŸáŸêÿå ŸàŸéŸÅŸéÿ±Ÿíÿ≠Ÿéÿ©Ÿå ÿπŸêŸÜŸíÿØŸé ŸÑŸêŸÇŸéÿßÿ°Ÿê ÿ±Ÿéÿ®ŸëŸêŸáŸê", en: "The fasting person has two joys: one when he breaks his fast, and one when he meets his Lord.", ref: "Muslim" },
									        { ar: "ÿßŸÑÿµŸëŸêŸäŸéÿßŸÖŸè ÿ¨ŸèŸÜŸëŸéÿ©Ÿå", en: "Fasting is a shield.", ref: "Bukhari" },
									        { ar: "ÿ™Ÿéÿ≥Ÿéÿ≠ŸëŸéÿ±ŸèŸàÿß ŸÅŸéÿ•ŸêŸÜŸëŸé ŸÅŸêŸä ÿßŸÑÿ≥ŸëŸèÿ≠ŸèŸàÿ±Ÿê ÿ®Ÿéÿ±ŸéŸÉŸéÿ©Ÿã", en: "Take Suhoor, for in Suhoor there is blessing.", ref: "Bukhari" },
									        { ar: "ŸÖŸéŸÜŸí ŸÑŸéŸÖŸí ŸäŸéÿØŸéÿπŸí ŸÇŸéŸàŸíŸÑŸé ÿßŸÑÿ≤ŸëŸèŸàÿ±Ÿê ŸàŸéÿßŸÑŸíÿπŸéŸÖŸéŸÑŸé ÿ®ŸêŸáŸê ŸÅŸéŸÑŸéŸäŸíÿ≥Ÿé ŸÑŸêŸÑŸëŸéŸáŸê ÿ≠Ÿéÿßÿ¨Ÿéÿ©Ÿå ŸÅŸêŸä ÿ£ŸéŸÜŸí ŸäŸéÿØŸéÿπŸé ÿ∑ŸéÿπŸéÿßŸÖŸéŸáŸè ŸàŸéÿ¥Ÿéÿ±Ÿéÿßÿ®ŸéŸáŸè", en: "Whoever does not give up false speech and evil deeds, Allah is not in need of his leaving food and drink.", ref: "Bukhari" },

									        // HYGIENE & PURITY
									        { ar: "ÿßŸÑÿ∑ŸëŸèŸáŸèŸàÿ±Ÿè ÿ¥Ÿéÿ∑Ÿíÿ±Ÿè ÿßŸÑÿ•ŸêŸäŸÖŸéÿßŸÜŸê", en: "Purity is half of faith.", ref: "Muslim" },
									        { ar: "ŸÑŸéŸàŸíŸÑÿßŸé ÿ£ŸéŸÜŸí ÿ£Ÿéÿ¥ŸèŸÇŸëŸé ÿπŸéŸÑŸéŸâ ÿ£ŸèŸÖŸëŸéÿ™ŸêŸä ŸÑÿ£ŸéŸÖŸéÿ±Ÿíÿ™ŸèŸáŸèŸÖŸí ÿ®ŸêÿßŸÑÿ≥ŸëŸêŸàŸéÿßŸÉŸê ÿπŸêŸÜŸíÿØŸé ŸÉŸèŸÑŸëŸê ÿµŸéŸÑÿßŸéÿ©Ÿç", en: "Were it not that I might overburden my followers, I would have commanded them to use the Siwak before every prayer.", ref: "Bukhari" },
									        { ar: "ÿ•ŸêŸÜŸëŸé ÿßŸÑŸÑŸëŸéŸáŸé ÿ¨ŸéŸÖŸêŸäŸÑŸå ŸäŸèÿ≠Ÿêÿ®ŸëŸè ÿßŸÑŸíÿ¨ŸéŸÖŸéÿßŸÑŸé", en: "Verily, Allah is Beautiful and He loves beauty.", ref: "Muslim" },
									        { ar: "ÿßŸÑŸíŸÅŸêÿ∑Ÿíÿ±Ÿéÿ©Ÿè ÿÆŸéŸÖŸíÿ≥Ÿå: ÿßŸÑŸíÿÆŸêÿ™ŸéÿßŸÜŸèÿå ŸàŸéÿßŸÑÿßŸêÿ≥Ÿíÿ™Ÿêÿ≠ŸíÿØŸéÿßÿØŸèÿå ŸàŸéŸÇŸéÿµŸëŸè ÿßŸÑÿ¥ŸëŸéÿßÿ±Ÿêÿ®Ÿêÿå ŸàŸéÿ™ŸéŸÇŸíŸÑŸêŸäŸÖŸè ÿßŸÑÿ£Ÿéÿ∏ŸíŸÅŸéÿßÿ±Ÿêÿå ŸàŸéŸÜŸéÿ™ŸíŸÅŸè ÿßŸÑÿ•Ÿêÿ®Ÿíÿ∑Ÿê", en: "Five are the acts of fitra: circumcision, shaving pubic hair, clipping the mustache, cutting the nails, and plucking hair under the armpits.", ref: "Bukhari" },
									        { ar: "ÿ•Ÿêÿ∞Ÿéÿß ÿßÿ≥Ÿíÿ™ŸéŸäŸíŸÇŸéÿ∏Ÿé ÿ£Ÿéÿ≠ŸéÿØŸèŸÉŸèŸÖŸí ŸÖŸêŸÜŸí ŸÜŸéŸàŸíŸÖŸêŸáŸê ŸÅŸéŸÑŸíŸäŸéÿ∫Ÿíÿ≥ŸêŸÑŸí ŸäŸéÿØŸéŸáŸè ŸÇŸéÿ®ŸíŸÑŸé ÿ£ŸéŸÜŸí ŸäŸèÿØŸíÿÆŸêŸÑŸéŸáŸéÿß ŸÅŸêŸä ŸàŸéÿ∂ŸèŸàÿ¶ŸêŸáŸê", en: "When one of you wakes up from sleep, he should wash his hands before putting them into the water for Wudu.", ref: "Bukhari" },

									        // CIVIC DUTIES & MANNERS
									        { ar: "ÿÆŸéŸäŸíÿ±Ÿè ÿßŸÑŸÜŸëŸéÿßÿ≥Ÿê ÿ£ŸéŸÜŸíŸÅŸéÿπŸèŸáŸèŸÖŸí ŸÑŸêŸÑŸÜŸëŸéÿßÿ≥Ÿê", en: "The best of people are those who are most beneficial to people.", ref: "Daraqutni" },
									        { ar: "ŸÑÿßŸé ŸäŸèÿ§ŸíŸÖŸêŸÜŸè ÿ£Ÿéÿ≠ŸéÿØŸèŸÉŸèŸÖŸí ÿ≠Ÿéÿ™ŸëŸéŸâ ŸäŸèÿ≠Ÿêÿ®ŸëŸé ŸÑÿ£ŸéÿÆŸêŸäŸáŸê ŸÖŸéÿß ŸäŸèÿ≠Ÿêÿ®ŸëŸè ŸÑŸêŸÜŸéŸÅŸíÿ≥ŸêŸáŸê", en: "None of you truly believes until he loves for his brother what he loves for himself.", ref: "Bukhari" },
									        { ar: "ÿ•ŸêŸÜŸëŸéŸÖŸéÿß ÿ®ŸèÿπŸêÿ´Ÿíÿ™Ÿè ŸÑÿ£Ÿèÿ™ŸéŸÖŸëŸêŸÖŸé ŸÖŸéŸÉŸéÿßÿ±ŸêŸÖŸé ÿßŸÑÿ£ŸéÿÆŸíŸÑÿßŸéŸÇŸê", en: "I was sent only to perfect noble character.", ref: "Al-Muatta" },
									        { ar: "ÿ™Ÿéÿ®Ÿéÿ≥ŸëŸèŸÖŸèŸÉŸé ŸÅŸêŸä ŸàŸéÿ¨ŸíŸáŸê ÿ£ŸéÿÆŸêŸäŸÉŸé ŸÑŸéŸÉŸé ÿµŸéÿØŸéŸÇŸéÿ©Ÿå", en: "Your smiling in the face of your brother is charity.", ref: "Tirmidhi" },
									        { ar: "ÿ•ŸêŸÖŸéÿßÿ∑Ÿéÿ©Ÿè ÿßŸÑÿ£Ÿéÿ∞ŸéŸâ ÿπŸéŸÜŸê ÿßŸÑÿ∑ŸëŸéÿ±ŸêŸäŸÇŸê ÿµŸéÿØŸéŸÇŸéÿ©Ÿå", en: "Removing harmful things from the road is charity.", ref: "Bukhari" },
									        { ar: "ÿßŸÑŸíŸÖŸèÿ≥ŸíŸÑŸêŸÖŸè ŸÖŸéŸÜŸí ÿ≥ŸéŸÑŸêŸÖŸé ÿßŸÑŸíŸÖŸèÿ≥ŸíŸÑŸêŸÖŸèŸàŸÜŸé ŸÖŸêŸÜŸí ŸÑŸêÿ≥ŸéÿßŸÜŸêŸáŸê ŸàŸéŸäŸéÿØŸêŸáŸê", en: "A Muslim is the one from whose tongue and hands other Muslims are safe.", ref: "Bukhari" },
									        { ar: "ŸÖŸéŸÜŸí ŸÉŸéÿßŸÜŸé ŸäŸèÿ§ŸíŸÖŸêŸÜŸè ÿ®ŸêÿßŸÑŸÑŸëŸéŸáŸê ŸàŸéÿßŸÑŸíŸäŸéŸàŸíŸÖŸê ÿßŸÑÿ¢ÿÆŸêÿ±Ÿê ŸÅŸéŸÑŸíŸäŸèŸÉŸíÿ±ŸêŸÖŸí ÿ¨Ÿéÿßÿ±ŸéŸáŸè", en: "Whoever believes in Allah and the Last Day should be kind to his neighbor.", ref: "Bukhari" },
									        { ar: "ŸÑÿßŸé ŸäŸéÿØŸíÿÆŸèŸÑŸè ÿßŸÑŸíÿ¨ŸéŸÜŸëŸéÿ©Ÿé ŸÖŸéŸÜŸí ŸÑÿßŸé ŸäŸéÿ£ŸíŸÖŸéŸÜŸè ÿ¨Ÿéÿßÿ±ŸèŸáŸè ÿ®ŸéŸàŸéÿßÿ¶ŸêŸÇŸéŸáŸè", en: "He will not enter Paradise whose neighbor is not secure from his wrongful conduct.", ref: "Muslim" },
									        { ar: "ÿßŸÑÿØŸëŸéÿßŸÑŸëŸè ÿπŸéŸÑŸéŸâ ÿßŸÑŸíÿÆŸéŸäŸíÿ±Ÿê ŸÉŸéŸÅŸéÿßÿπŸêŸÑŸêŸáŸê", en: "The one who guides to something good has a reward similar to the one who does it.", ref: "Muslim" },
									        { ar: "ŸÉŸèŸÑŸëŸè ŸÖŸéÿπŸíÿ±ŸèŸàŸÅŸç ÿµŸéÿØŸéŸÇŸéÿ©Ÿå", en: "Every good deed is charity.", ref: "Bukhari" },
									        { ar: "ŸÖŸéŸÜŸí ŸÑÿßŸé ŸäŸéÿ±Ÿíÿ≠ŸéŸÖŸê ÿßŸÑŸÜŸëŸéÿßÿ≥Ÿé ŸÑÿßŸé ŸäŸéÿ±Ÿíÿ≠ŸéŸÖŸíŸáŸè ÿßŸÑŸÑŸëŸéŸáŸè", en: "Whoever does not show mercy to people, Allah will not show mercy to him.", ref: "Muslim" },
									        { ar: "ÿÆŸêŸäŸéÿßÿ±ŸèŸÉŸèŸÖŸí ÿ£Ÿéÿ≠Ÿéÿßÿ≥ŸêŸÜŸèŸÉŸèŸÖŸí ÿ£ŸéÿÆŸíŸÑÿßŸéŸÇŸãÿß", en: "The best among you are those who have the best manners.", ref: "Bukhari" },
									        { ar: "ÿßÿ™ŸëŸéŸÇŸê ÿßŸÑŸÑŸëŸéŸáŸé ÿ≠ŸéŸäŸíÿ´ŸèŸÖŸéÿß ŸÉŸèŸÜŸíÿ™Ÿéÿå ŸàŸéÿ£Ÿéÿ™Ÿíÿ®ŸêÿπŸê ÿßŸÑÿ≥ŸëŸéŸäŸëŸêÿ¶Ÿéÿ©Ÿé ÿßŸÑŸíÿ≠Ÿéÿ≥ŸéŸÜŸéÿ©Ÿé ÿ™ŸéŸÖŸíÿ≠ŸèŸáŸéÿß", en: "Fear Allah wherever you are, and follow up a bad deed with a good deed and it will wipe it out.", ref: "Tirmidhi" },
									        { ar: "ÿßŸÑŸíŸÉŸéŸÑŸêŸÖŸéÿ©Ÿè ÿßŸÑÿ∑ŸëŸéŸäŸëŸêÿ®Ÿéÿ©Ÿè ÿµŸéÿØŸéŸÇŸéÿ©Ÿå", en: "A kind word is charity.", ref: "Bukhari" },
									        { ar: "ÿ•ŸêŸÜŸëŸé ÿßŸÑŸÑŸëŸéŸáŸé ŸäŸèÿ≠Ÿêÿ®ŸëŸè ÿ•Ÿêÿ∞Ÿéÿß ÿπŸéŸÖŸêŸÑŸé ÿ£Ÿéÿ≠ŸéÿØŸèŸÉŸèŸÖŸí ÿπŸéŸÖŸéŸÑÿßŸã ÿ£ŸéŸÜŸí ŸäŸèÿ™ŸíŸÇŸêŸÜŸéŸáŸè", en: "Allah loves that when one of you does a job, he does it with proficiency.", ref: "Tabarani" },
									        { ar: "ŸÑÿßŸé ÿ™Ÿéÿ∫Ÿíÿ∂Ÿéÿ®Ÿí", en: "Do not become angry.", ref: "Bukhari" },
									        { ar: "ÿßŸÑŸíÿ≠ŸéŸäŸéÿßÿ°Ÿè ŸÑÿßŸé ŸäŸéÿ£Ÿíÿ™ŸêŸä ÿ•ŸêŸÑÿßŸëŸé ÿ®ŸêÿÆŸéŸäŸíÿ±Ÿç", en: "Modesty does not bring anything except good.", ref: "Bukhari" },
									        { ar: "ŸÖŸéŸÜŸí ÿ≥ŸéŸÑŸéŸÉŸé ÿ∑Ÿéÿ±ŸêŸäŸÇŸãÿß ŸäŸéŸÑŸíÿ™ŸéŸÖŸêÿ≥Ÿè ŸÅŸêŸäŸáŸê ÿπŸêŸÑŸíŸÖŸãÿß ÿ≥ŸéŸáŸëŸéŸÑŸé ÿßŸÑŸÑŸëŸéŸáŸè ŸÑŸéŸáŸè ÿ®ŸêŸáŸê ÿ∑Ÿéÿ±ŸêŸäŸÇŸãÿß ÿ•ŸêŸÑŸéŸâ ÿßŸÑŸíÿ¨ŸéŸÜŸëŸéÿ©Ÿê", en: "Whoever follows a path in pursuit of knowledge, Allah will make easy for him a path to Paradise.", ref: "Muslim" },
									        { ar: "ŸäŸéÿ≥ŸëŸêÿ±ŸèŸàÿß ŸàŸéŸÑÿßŸé ÿ™ŸèÿπŸéÿ≥ŸëŸêÿ±ŸèŸàÿßÿå ŸàŸéÿ®Ÿéÿ¥ŸëŸêÿ±ŸèŸàÿß ŸàŸéŸÑÿßŸé ÿ™ŸèŸÜŸéŸÅŸëŸêÿ±ŸèŸàÿß", en: "Make things easy and do not make them difficult; give glad tidings and do not repel people.", ref: "Bukhari" },
									        { ar: "ÿßŸÑŸíŸäŸéÿØŸè ÿßŸÑŸíÿπŸèŸÑŸíŸäŸéÿß ÿÆŸéŸäŸíÿ±Ÿå ŸÖŸêŸÜŸé ÿßŸÑŸíŸäŸéÿØŸê ÿßŸÑÿ≥ŸëŸèŸÅŸíŸÑŸéŸâ", en: "The upper hand (the giver) is better than the lower hand (the receiver).", ref: "Bukhari" }
    ];
        function updateProgressBar() {
            const percentage = Math.min((CURRENT_RAISED / GOAL_AMOUNT) * 100, 100);
            document.getElementById('raised-text').innerText = `Raised: $${CURRENT_RAISED.toLocaleString()}`;
            document.getElementById('percent-text').innerText = `${percentage.toFixed(1)}% Completed`;
            setTimeout(() => { document.getElementById('progress-fill').style.width = percentage + "%"; }, 500);
        }

        function checkDonationSlide() {
            const now = new Date();
            const curTimeInMinutes = now.getHours() * 60 + now.getMinutes();
            let showSlide = false;

            // Check against fixed iqama times
            Object.values(iqamaTimes).forEach(timeStr => {
                if (timeStr.includes(':')) {
                    const [h, m] = timeStr.split(':').map(Number);
                    const iqamaMins = h * 60 + m;
                    // Show 10 mins after for 5 mins
                    if (curTimeInMinutes >= iqamaMins + 10 && curTimeInMinutes < iqamaMins + 15) showSlide = true;
                }
            });

            // Special check for Maghrib (Sunset Adhan + 3 mins iqama + 10 mins wait)
            const maghribAdhan = document.querySelector('.prayer-row:nth-child(4) td:nth-child(2)')?.innerText;
            if (maghribAdhan) {
                const [mh, mm] = maghribAdhan.split(':').map(Number);
                const magIqama = mh * 60 + mm + 3;
                if (curTimeInMinutes >= magIqama + 10 && curTimeInMinutes < magIqama + 15) showSlide = true;
            }

            const overlay = document.getElementById('donation-overlay');
            if (showSlide) {
                overlay.style.display = 'flex';
                updateProgressBar();
            } else {
                overlay.style.display = 'none';
            }
        }

        function updateRamadanCountdown() {
            const now = new Date();
            const ramadanStart = new Date("February 19, 2026 00:00:00");
            const diff = ramadanStart - now;
            const days = Math.ceil(diff / (1000 * 60 * 60 * 24));
            const el = document.getElementById('ramadan-countdown');

            if (days > 1) {
                el.innerText = `üåô ${days} DAYS UNTIL RAMADAN 1447H`;
                el.style.background = "#2e7d32";
            } else if (days === 1) {
                el.innerText = `üåô RAMADAN BEGINS TOMORROW INSHA'ALLAH`;
            } else if (days <= 0 && days > -30) {
                const ramadanDay = Math.abs(days) + 1;
                el.innerText = `üåô RAMADAN MUBARAK - DAY ${ramadanDay}`;
                el.style.background = "var(--primary-blue)";
                el.style.color = "var(--gold)";
            } else {
                el.style.display = "none";
            }
        }

        async function updateWeather() {
            try {
                const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=43.8384&longitude=-79.0868&current_weather=true`);
                const data = await res.json();
                document.getElementById('temp').innerText = Math.round(data.current_weather.temperature) + "¬∞C";
                const conditions = { 0: "Clear", 1: "Clear", 2: "Partly Cloudy", 3: "Overcast", 45: "Fog", 61: "Rain", 71: "Snow" };
                document.getElementById('condition').innerText = conditions[data.current_weather.weathercode] || "Pickering";
            } catch (e) { console.error(e); }
        }

        async function updateData() {
            try {
                const res = await fetch(`https://api.aladhan.com/v1/timingsByCity?city=Pickering&country=Canada&method=2&school=1`);
                const data = await res.json();
                const t = data.data.timings;
                document.getElementById('hijri').innerText = `${data.data.date.hijri.day} ${data.data.date.hijri.month.en} ${data.data.date.hijri.year}`;

                const now = new Date();
                const curTime = now.getHours().toString().padStart(2, '0') + ":" + now.getMinutes().toString().padStart(2, '0');
                const sunriseTime = t['Sunrise'];

                let currentIndex = -1;
                const ishaTime = t['Isha'];
                const [ishaH, ishaM] = ishaTime.split(':').map(Number);
                const transitionTime = new Date(); transitionTime.setHours(ishaH + 3, ishaM, 0);

                if (now > transitionTime || curTime < t['Fajr']) {
                    currentIndex = 0;
                } else if (curTime >= sunriseTime && curTime < t['Dhuhr']) {
                    currentIndex = 1;
                } else {
                    for (let i = 0; i < salahList.length; i++) {
                        if (curTime >= t[salahList[i].id]) currentIndex = i;
                    }
                }

                let html = '';
                salahList.forEach((salah, index) => {
                    const activeClass = (index === currentIndex) ? "active" : "";
                    const iqamaValue = iqamaTimes[salah.id];
                    const iqamaClass = (salah.id === 'Maghrib') ? 'col-iqama iqama-text' : 'col-iqama';
                    html += `<tr class="prayer-row ${activeClass}"><td class="col-en">${salah.id}</td><td>${t[salah.id]}</td><td class="${iqamaClass}">${iqamaValue}</td><td class="col-ar">${salah.ar}</td></tr>`;
                });
                document.getElementById('prayer-body').innerHTML = html;
                updateRamadanCountdown();
                checkDonationSlide();
            } catch (e) { console.error(e); }
        }

        function runClock() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString('en-GB', { hour12: false });
            const hadith = localHadiths[(now.getDate() - 1) % localHadiths.length];
            document.getElementById('ar-hadith').innerText = hadith.ar;
            document.getElementById('en-hadith').innerText = `"${hadith.en}"`;
            checkDonationSlide(); // Continuous check
        }

        setInterval(runClock, 1000);
        setInterval(updateData, 60000);
        setInterval(updateWeather, 600000);
        runClock(); updateData(); updateWeather();
    </script>
</body>
</html>
